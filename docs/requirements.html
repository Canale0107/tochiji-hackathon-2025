<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shibuya Live Canvas - 要件定義書</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<style>
:root {
  --primary: #6366f1;
  --accent: #ec4899;
  --success: #10b981;
  --warning: #f59e0b;
  --dark: #1e293b;
  --light: #f8fafc;
  --border: #e2e8f0;
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --shadow: 0 1px 3px rgba(0,0,0,0.1);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  line-height: 1.6;
  color: var(--text-primary);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}

.container {
  display: flex;
  min-height: 100vh;
  background: white;
}

.sidebar {
  width: 260px;
  background: var(--dark);
  padding: 24px 16px;
  position: fixed;
  height: 100vh;
  overflow-y: auto;
  box-shadow: 2px 0 5px rgba(0,0,0,0.1);
  transition: transform 0.3s;
}

.sidebar h2 {
  color: white;
  font-size: 1.5rem;
  margin-bottom: 20px;
  text-align: center;
}

.nav-item {
  color: #cbd5e1;
  padding: 10px 12px;
  display: block;
  text-decoration: none;
  border-radius: 6px;
  margin-bottom: 5px;
  transition: all 0.3s;
  font-size: 0.9rem;
}

.nav-item:hover {
  background: rgba(255,255,255,0.08);
  color: white;
}

.nav-item.active {
  background: var(--primary);
  color: white;
}

.main-content {
  margin-left: 260px;
  padding: 32px 48px;
  width: 100%;
  max-width: 1600px;
}

h1 {
  font-size: 2.5rem;
  margin-bottom: 10px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

h2 {
  font-size: 1.8rem;
  margin: 30px 0 15px;
  color: var(--dark);
  border-bottom: 2px solid var(--primary);
  padding-bottom: 8px;
}

h3 {
  font-size: 1.3rem;
  margin: 20px 0 10px;
  color: var(--text-primary);
}

.card {
  background: white;
  padding: 24px;
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  margin-bottom: 20px;
}

.ui-option {
  border: 2px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  transition: all 0.3s;
}

.ui-option:hover {
  border-color: var(--primary);
  box-shadow: 0 4px 15px rgba(99, 102, 241, 0.1);
}

.ui-option h4 {
  color: var(--primary);
  margin-bottom: 10px;
}

.color-palette {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  margin: 20px 0;
}

.color-item {
  text-align: center;
}

.color-box {
  width: 80px;
  height: 80px;
  border-radius: 8px;
  margin-bottom: 5px;
  border: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 0.8rem;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;
}

th {
  background: var(--dark);
  color: white;
  padding: 12px;
  text-align: left;
}

td {
  padding: 12px;
  border-bottom: 1px solid var(--border);
}

.priority-high {
  background: #fee2e2;
  color: #dc2626;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
}

.priority-medium {
  background: #fef3c7;
  color: #d97706;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
}

.priority-low {
  background: #dbeafe;
  color: #2563eb;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
}

.feature-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 20px;
  border-radius: 12px;
  margin: 15px 0;
}

.mermaid {
  margin: 20px 0;
  background: white;
  padding: 20px;
  border-radius: 8px;
  overflow-x: auto;
}

@media (max-width: 768px) {
  .sidebar {
    transform: translateX(-100%);
  }
  .main-content {
    margin-left: 0;
    padding: 20px;
  }
}

@media print {
  .sidebar {
    display: none;
  }
  .main-content {
    margin-left: 0;
  }
}

.toggle-menu {
  display: none;
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 1000;
  background: var(--primary);
  color: white;
  border: none;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
}

@media (max-width: 768px) {
  .toggle-menu {
    display: block;
  }
  .sidebar.active {
    transform: translateX(0);
  }
}

.stat-card {
  background: var(--dark);
  color: white;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}

.stat-number {
  font-size: 2rem;
  font-weight: bold;
}

.personas {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.persona-card {
  background: white;
  border: 2px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  text-align: center;
}

.persona-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  margin: 0 auto 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
}
</style>
</head>
<body>

<button class="toggle-menu" onclick="toggleSidebar()">☰</button>

<div class="container">
<aside class="sidebar" id="sidebar">
  <h2>📍 Live Canvas</h2>
  <nav>
    <a href="#overview" class="nav-item active">プロジェクト概要</a>
    <a href="#ui-design" class="nav-item">UI/ビジュアル設計</a>
    <a href="#personas" class="nav-item">ペルソナ設定</a>
    <a href="#requirements" class="nav-item">ユーザー要望</a>
    <a href="#features" class="nav-item">機能要件</a>
    <a href="#architecture" class="nav-item">システム構成</a>
    <a href="#schedule" class="nav-item">スケジュール</a>
    <a href="#settings" class="nav-item">設定情報</a>
  </nav>
</aside>

<main class="main-content">
  
<section id="overview">
  <h1>Shibuya Live Canvas</h1>
  <p style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 30px;">
    渋谷の"いま"を映し出す次世代市民共創プラットフォーム
  </p>

  <div class="card">
    <h2>エグゼクティブサマリー</h2>
    <p>「Shibuya Live Canvas」は、渋谷という街をリアルタイムで可視化し、市民・観光客・行政をつなぐ革新的なマップ型SNSです。Googleマップが過去の口コミを表示するのに対し、我々は「現在進行形の体験」を共有します。位置情報と時間軸を軸に、イベント、感情、発見を地図上に集約し、言語や世代を超えた交流を促進します。</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0;">
      <div class="stat-card">
        <div class="stat-number">30万</div>
        <div>想定MAU</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">4言語</div>
        <div>対応言語数</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">24/7</div>
        <div>リアルタイム更新</div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>ビジョン・ミッション</h3>
    <div class="feature-card">
      <h4>Vision</h4>
      <p>渋谷を、言語や国籍、世代を超えて、誰もが"いま、ここで起きていること"を共有し、街の未来を共に創造できる、世界で最もダイナミックな"生きたキャンバス"にする。</p>
    </div>
    <div class="feature-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
      <h4>Mission</h4>
      <p>位置情報に紐づく"リアルタイムな体験と感情"を集約・可視化することで、人々の日常に発見と共感を生み出し、市民と行政の間に存在する"見えない壁"を溶かす。</p>
    </div>
  </div>
</section>

<section id="ui-design">
  <h2>UI/ビジュアル設計</h2>
  
  <div class="card">
    <h3>UIデザイン案</h3>
    
    <div class="ui-option">
      <h4>案1: ダイナミック・ネオン</h4>
      <p><strong>コンセプト:</strong> 渋谷の夜景をイメージした、ネオンカラーが特徴的なダークモードUI</p>
      <p><strong>特徴:</strong></p>
      <ul>
        <li>ダークベースに鮮やかなネオンカラーのアクセント</li>
        <li>地図上のピンが時間帯によって光り方が変化</li>
        <li>若者向けの先進的なビジュアル</li>
      </ul>
      <p><strong>採用理由:</strong> Z世代をメインターゲットとし、SNS的な楽しさを演出</p>
      <p><strong>画像生成プロンプト:</strong> "Dark mode mobile app UI, neon pink and blue accents, map-based social network interface, floating pins with glowing effects, modern glassmorphism design, Shibuya night cityscape background"</p>
      <img src="./ui-dark-mode.png" alt="ダークモードUI案" style="width: 100%; max-width: 400px; margin: 20px auto; display: block; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
    </div>

    <div class="ui-option">
      <h4>案2: クリーン・ミニマル</h4>
      <p><strong>コンセプト:</strong> 情報の視認性を最優先した、明るく清潔感のあるライトモードUI</p>
      <p><strong>特徴:</strong></p>
      <ul>
        <li>白基調で情報が見やすい</li>
        <li>カラフルなピンで楽しさを演出</li>
        <li>全世代が使いやすいユニバーサルデザイン</li>
      </ul>
      <p><strong>採用理由:</strong> 行政連携も視野に入れた信頼感のあるデザイン</p>
      <p><strong>画像生成プロンプト:</strong> "Clean minimalist mobile app UI, white background, colorful map pins, bottom navigation bar, Japanese and English text, modern Material Design 3 style, accessibility focused interface"</p>
      <img src="./ui-light-mode.png" alt="ライトモードUI案" style="width: 100%; max-width: 400px; margin: 20px auto; display: block; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
    </div>
  </div>

  <div class="card">
    <h3>カラーパレット</h3>
    <div class="color-palette">
      <div class="color-item">
        <div class="color-box" style="background: #6366f1;">Primary</div>
        <small>#6366f1</small>
      </div>
      <div class="color-item">
        <div class="color-box" style="background: #ec4899;">Accent</div>
        <small>#ec4899</small>
      </div>
      <div class="color-item">
        <div class="color-box" style="background: #10b981;">Success</div>
        <small>#10b981</small>
      </div>
      <div class="color-item">
        <div class="color-box" style="background: #f59e0b;">Warning</div>
        <small>#f59e0b</small>
      </div>
      <div class="color-item">
        <div class="color-box" style="background: #1e293b;">Dark</div>
        <small>#1e293b</small>
      </div>
      <div class="color-item">
        <div class="color-box" style="background: #f8fafc; color: #333!important;">Light</div>
        <small>#f8fafc</small>
      </div>
    </div>
  </div>
</section>

<section id="personas">
  <h2>ペルソナ設定</h2>
  
  <div class="personas">
    <div class="persona-card">
      <div class="persona-avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">👨‍🎓</div>
      <h4>ユウキ（20歳）</h4>
      <p><strong>属性:</strong> 大学生</p>
      <p><strong>ニーズ:</strong> 限定イベントの発見、友達との体験共有</p>
      <p><strong>課題:</strong> 情報が分散していて見逃しがち</p>
    </div>
    
    <div class="persona-card">
      <div class="persona-avatar" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">👩‍💼</div>
      <h4>ソフィア（26歳）</h4>
      <p><strong>属性:</strong> 外国人観光客</p>
      <p><strong>ニーズ:</strong> リアルタイムな現地情報、言語の壁を超えた交流</p>
      <p><strong>課題:</strong> 日本語の情報にアクセスできない</p>
    </div>
    
    <div class="persona-card">
      <div class="persona-avatar" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">👨‍💼</div>
      <h4>佐藤（40歳）</h4>
      <p><strong>属性:</strong> 行政職員</p>
      <p><strong>ニーズ:</strong> 市民の生の声収集、施策効果の可視化</p>
      <p><strong>課題:</strong> 従来の方法では若者の声が届かない</p>
    </div>
  </div>
</section>

<section id="requirements">
  <h2>ユーザー要望一覧</h2>
  
  <div class="card">
    <table>
      <thead>
        <tr>
          <th>要望内容</th>
          <th>優先度</th>
          <th>実装難易度</th>
          <th>予想工数</th>
          <th>備考</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>リアルタイム地図表示</td>
          <td><span class="priority-high">高</span></td>
          <td><span class="priority-medium">中</span></td>
          <td>2週間</td>
          <td>MVP必須機能</td>
        </tr>
        <tr>
          <td>多言語対応（4言語）</td>
          <td><span class="priority-high">高</span></td>
          <td><span class="priority-high">高</span></td>
          <td>3週間</td>
          <td>DeepL API利用</td>
        </tr>
        <tr>
          <td>ユーザー投稿機能</td>
          <td><span class="priority-high">高</span></td>
          <td><span class="priority-low">低</span></td>
          <td>1週間</td>
          <td>テキスト・画像対応</td>
        </tr>
        <tr>
          <td>スマート通知</td>
          <td><span class="priority-medium">中</span></td>
          <td><span class="priority-medium">中</span></td>
          <td>2週間</td>
          <td>位置・時間ベース</td>
        </tr>
        <tr>
          <td>お題（Quest）機能</td>
          <td><span class="priority-medium">中</span></td>
          <td><span class="priority-low">低</span></td>
          <td>1週間</td>
          <td>ゲーミフィケーション</td>
        </tr>
        <tr>
          <td>イベント登録ツール</td>
          <td><span class="priority-high">高</span></td>
          <td><span class="priority-low">低</span></td>
          <td>1週間</td>
          <td>主催者向け</td>
        </tr>
        <tr>
          <td>統計ダッシュボード</td>
          <td><span class="priority-low">低</span></td>
          <td><span class="priority-medium">中</span></td>
          <td>2週間</td>
          <td>Phase 2で実装</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<section id="features">
  <h2>機能要件</h2>
  
  <div class="card">
    <h3>主要機能フロー</h3>
    <div class="mermaid">
      graph LR
        A[アプリ起動] --> B[位置情報取得]
        B --> C[地図表示]
        C --> D{ユーザーアクション}
        D -->|投稿| E[Live Post作成]
        D -->|閲覧| F[ピン選択]
        D -->|検索| G[フィルタリング]
        E --> H[翻訳処理]
        F --> I[詳細表示]
        G --> J[結果表示]
        H --> K[地図に反映]
        I --> L[いいね/コメント]
    </div>
  </div>

  <div class="card">
    <h3>API通信シーケンス</h3>
    <div class="mermaid">
      sequenceDiagram
        participant U as ユーザー
        participant A as アプリ
        participant S as サーバー
        participant T as 翻訳API
        participant N as 通知サービス
        
        U->>A: 投稿作成
        A->>S: POST /api/posts
        S->>T: 翻訳リクエスト
        T-->>S: 翻訳結果
        S-->>A: 投稿ID返却
        S->>N: 通知配信依頼
        N-->>U: プッシュ通知
    </div>
  </div>
</section>

<section id="architecture">
  <h2>システム構成</h2>
  
  <div class="card">
    <h3>アーキテクチャ図</h3>
    <div class="mermaid">
      graph TB
        subgraph "Frontend"
          A[React Native App]
          B[Web管理画面]
        end
        
        subgraph "Backend"
          C[FastAPI]
          D[WebSocket Server]
        end
        
        subgraph "Database"
          E[(PostgreSQL/PostGIS)]
          F[(Redis Cache)]
        end
        
        subgraph "External Services"
          G[DeepL API]
          H[Mapbox]
          I[Push Notification]
        end
        
        A --> C
        B --> C
        A --> D
        C --> E
        C --> F
        C --> G
        A --> H
        D --> I
    </div>
  </div>

  <div class="card">
    <h3>データベース設計</h3>
    <div class="mermaid">
      erDiagram
        USER ||--o{ POST : creates
        USER ||--o{ LIKE : gives
        POST ||--o{ COMMENT : has
        POST ||--|| LOCATION : has
        EVENT ||--|| LOCATION : has
        QUEST ||--o{ SUBMISSION : receives
        
        USER {
          uuid id PK
          string name
          string email
          string language
          timestamp created_at
        }
        
        POST {
          uuid id PK
          uuid user_id FK
          text content
          json translations
          point location
          timestamp created_at
          float opacity
        }
        
        EVENT {
          uuid id PK
          string title
          text description
          point location
          timestamp start_time
          timestamp end_time
        }
    </div>
  </div>
</section>

<section id="schedule">
  <h2>スケジュール</h2>
  
  <div class="card">
    <h3>開発ロードマップ</h3>
    <div class="mermaid">
      gantt
        title プロジェクトスケジュール
        dateFormat YYYY-MM-DD
        section Phase 1
        要件定義           :done, 2025-01-01, 7d
        UI/UX設計         :done, 2025-01-08, 7d
        MVP開発           :active, 2025-01-15, 21d
        テスト            :2025-02-05, 7d
        リリース準備       :2025-02-12, 3d
        
        section Phase 2
        機能拡張設計       :2025-03-01, 7d
        共創機能開発       :2025-03-08, 14d
        行政連携構築       :2025-03-22, 14d
        
        section Phase 3
        AI機能設計        :2025-06-01, 14d
        デジタルツイン開発  :2025-06-15, 30d
    </div>
  </div>
</section>

<section id="settings">
  <h2>設定情報</h2>
  
  <div class="card">
    <h3>Claude Code統合設定</h3>
    <p style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
      <strong>⚠️ 以下の設定をClaude Codeの設定ファイルまたは環境変数として登録してください</strong>
    </p>
    
    <table>
      <tr>
        <td><strong>プロジェクトURL</strong></td>
        <td>https://api.shibuya-live-canvas.jp</td>
      </tr>
      <tr>
        <td><strong>API エンドポイント</strong></td>
        <td>/api/v1/</td>
      </tr>
      <tr>
        <td><strong>認証トークン</strong></td>
        <td>sk-proj-****-****-****</td>
      </tr>
      <tr>
        <td><strong>DeepL API Key</strong></td>
        <td>****-****-****-****</td>
      </tr>
      <tr>
        <td><strong>Mapbox Token</strong></td>
        <td>pk.****-****-****</td>
      </tr>
      <tr>
        <td><strong>環境変数</strong></td>
        <td>
          <code>NODE_ENV=development</code><br>
          <code>DATABASE_URL=postgresql://...</code><br>
          <code>REDIS_URL=redis://...</code>
        </td>
      </tr>
    </table>
  </div>
</section>

</main>
</div>

<script>
mermaid.initialize({ 
  startOnLoad: true,
  theme: 'default',
  themeVariables: {
    primaryColor: '#6366f1',
    primaryTextColor: '#fff',
    primaryBorderColor: '#4f46e5',
    lineColor: '#5c6ac4',
    secondaryColor: '#ec4899',
    tertiaryColor: '#f8fafc'
  }
});

function toggleSidebar() {
  const sidebar = document.getElementById('sidebar');
  sidebar.classList.toggle('active');
}

document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', function(e) {
    e.preventDefault();
    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
    this.classList.add('active');
    const target = this.getAttribute('href');
    document.querySelector(target).scrollIntoView({ behavior: 'smooth' });
  });
});

window.addEventListener('scroll', () => {
  const sections = document.querySelectorAll('section');
  const navItems = document.querySelectorAll('.nav-item');
  
  let current = '';
  sections.forEach(section => {
    const sectionTop = section.offsetTop;
    const sectionHeight = section.clientHeight;
    if (pageYOffset >= sectionTop - 100) {
      current = section.getAttribute('id');
    }
  });
  
  navItems.forEach(item => {
    item.classList.remove('active');
    if (item.getAttribute('href') === `#${current}`) {
      item.classList.add('active');
    }
  });
});
</script>

</body>
</html>